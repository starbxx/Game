!function(t,i,n){var e=(n.un,n.uns,n["static"],n["class"]),r=n.getset,h=(n.__newvec,laya.components.Component);laya.d3.core.MeshTerrainSprite3D,laya.d3.core.Sprite3D,function(t){function i(){this._meshTerrainSprite3D=null,this._finder=null,this._setting=null,this.grid=null,i.__super.call(this)}e(i,"laya.d3.component.PathFind",t);var n=i.prototype;return n._onAdded=function(){if(!(this.owner instanceof laya.d3.core.MeshTerrainSprite3D))throw new Error("PathFinding: The owner must MeshTerrainSprite3D!");this._meshTerrainSprite3D=this.owner},n.findPath=function(t,i,n,e){var r=this._meshTerrainSprite3D.minX,h=this._meshTerrainSprite3D.minZ,s=this._meshTerrainSprite3D.width/this.grid.width,a=this._meshTerrainSprite3D.depth/this.grid.height,o=s/2,d=a/2,l=Math.floor((t-r)/s),g=Math.floor((i-h)/a),f=Math.floor((n-r)/s),u=Math.floor((e-h)/a),c=this.grid.width-1,p=this.grid.height-1;l>c&&(l=c),g>p&&(g=p),0>l&&(l=0),0>g&&(g=0),f>c&&(f=c),u>p&&(u=p),0>f&&(f=0),0>u&&(u=0);var _=this._finder.findPath(l,g,f,u,this.grid);this.grid.reset();for(var m=1;m<_.length-1;m++){var w=_[m];w[0]=w[0]*s+o+r,w[1]=w[1]*a+d+h}return 1==_.length?(_[0][0]=n,_[0][1]=n):_.length>1&&(_[0][0]=t,_[0][1]=i,_[_.length-1][0]=n,_[_.length-1][1]=e),_},r(0,n,"setting",function(){return this._setting},function(t){t&&(this._finder=new PathFinding.finders.AStarFinder(t)),this._setting=t}),i}(h)}(window,document,Laya);